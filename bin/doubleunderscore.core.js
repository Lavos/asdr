LUCID.provide("__",function(){var q=function(p){var q=new Date,c=function(){},x=this.__;c.version=20130426;c.each=function(a,b){for(key in a)a.hasOwnProperty(key)&&b(a[key],key,a)};c.extend=function(a){for(var b=Array.prototype.slice.call(arguments,1),c=0,d=b.length;c<d;){var f=b[c],g;for(g in f)a[g]=f[g];c++}return a};c.extend(c,p);c.noConflict=function(){this.__=x;return this};c.getRandomInt=function(a,b){return Math.floor(Math.random()*(b-a+1))+a};c.getRandomItem=function(a){return a[c.getRandomInt(0,
a.length-1)]};c.check=function(a){return!(null===a||void 0===a||""===a||a===[]||!1===a)};var y=/(.+)\.([^.]+)$/;c.parseFilename=function(a){a=y.exec(a);return{name:a[1]||"",extension:a[2]||""}};c.hrFilesize=function(a,b){"undefined"===typeof b&&(b=2);return 1024>a?c.sprintf("%s B",a):a<Math.pow(1024,2)?c.sprintf("%s KB",(a/1024).toFixed(b)):a<Math.pow(1024,3)?c.sprintf("%s MB",(a/Math.pow(1024,2)).toFixed(b)):c.sprintf("%s GB",(a/Math.pow(1024,3)).toFixed(b))};c.truncate=function(a,b,c){if(!a)return"";
a=String(a);b=~~b;return a.length>b?a.slice(0,b)+(c||"&hellip;"):a};var u=function(a,b,c,d){var f=c[b];try{return"undefined"!==typeof a[f]?b===c.length-1?a[f]:u(a[f],++b,c,d):d}catch(g){return d}};c.path=function(a,b,c){return u(a,0,b.split("."),c)};c.definePath=function(a,b,c){b=b?b.split("."):[];for(var d=0,f=b.length;d<f;){var g=b[d],k=a[g];k||(k=c&&d+1===f?c:{},a[g]=k);a=k;d++}return a};c.escapeRegex=function(a){return a.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")};var z=/\s([a-zA-Z]+)/;c.getType=
c.getClass=function(a){return{}.toString.call(a).match(z)[1].toLowerCase()};p={};for(var r,v=/\+/g,A=/([^&;=]+)=?([^&;]*)/g,B=window.location.search.substring(1);r=A.exec(B);)p[decodeURIComponent(r[1].replace(v," "))]=decodeURIComponent(r[2].replace(v," "));c.queryParams=p;c.toQueryParams=function(a){var b=[];c.each(a,function(a,d){b[b.length]=c.sprintf("%s=%s",encodeURIComponent(d),encodeURIComponent(a))});return b.length?"?"+b.join("&"):""};c.getMeta=function(a){a=a||document;if(a=a.getElementsByTagName("head"))a=
a[0].getElementsByTagName("meta");else return{};for(var b={},c=a.length;c--;){var d=a[c];if(d.getAttribute("content")){var f=d.getAttribute("property")||d.getAttribute("name")||d.getAttribute("content");b[f]=d.getAttribute("content")}}return b};c.dims=function(){var a=window,b=document,e=b.documentElement,b=b.getElementsByTagName("body")[0];return{x:a.innerWidth||e.clientWidth||c.path(b,"clientWidth",0),y:a.innerHeight||e.clientHeight||c.path(b,"clientHeight",0)}};c.onLoad=function(a,b,e){var d=!1;
if("function"===c.getType(b)){var f=function(a){if(a||!d&&(!this.readyState||"loaded"===this.readyState||"complete"===this.readyState))d=!0,b(this),c.clearOnLoad(this)};a.onload=a.onreadystatechange=f;e&&(a.timer=setTimeout(function(){f(!0)},e))}return a};c.clearOnLoad=function(a){a.onload=a.onreadystatechange=null;a.timer&&(clearTimeout(a.timer),a.timer=null);return a};c.addCSS=function(a){var b=document.createElement("link");b.type="text/css";b.rel="stylesheet";b.href=a;b.media="all";document.getElementsByTagName("head")[0].appendChild(b)};
c.addStyle=function(a){if(a&&0<a.length){var b=document.getElementsByTagName("head")[0],c=document.createElement("style");c.type="text/css";c.styleSheet?c.styleSheet.cssText=a.join("\n"):c.appendChild(document.createTextNode(a.join("\n")));b.appendChild(c);return c}return null};c.addJS=function(a,b){var e=c.onLoad(document.createElement("script"),b);e.type="text/javascript";e.async=!0;e.src=a;var d=document.getElementsByTagName("script")[0];d.parentNode.insertBefore(e,d)};c.addImage=function(a,b,
e,d){b=c.onLoad(document.createElement("img"),b,d);b.src=a;e&&(b.style.display="none",document.getElementsByTagName("body")[0].appendChild(b));return b};c.dict=function(a){for(var b=a.length,c={};b--;){var d=a[b];c[d.name]=d.value}return c};c.augment=function(a,b,c){if(c)for(var d=c.length;d--;)a.prototype[c[d]]=b.prototype[c[d]];else for(d in b.prototype)a.prototype[d]=b.prototype[d]};c.decorate=function(a,b){a._DecorationInits||(a._DecorationInits=[],a._applyDecorations=function(){for(var a=0,b=
this._DecorationInits.length;a<b;)this._DecorationInits[a].call(this),a++});a._DecorationInits.push(b.init);for(var c in b.methods)a[c]=b.methods[c];return a};c.addEvent=function(a,b,c){a.attachEvent?(a["e"+b+c]=c,a[b+c]=function(){a["e"+b+c](window.event)},a.attachEvent("on"+b,a[b+c])):a.addEventListener(b,c,!1)};c.removeEvent=function(a,b,c){a.detachEvent?(a.detachEvent("on"+b,a[b+c]),a[b+c]=null):a.removeEventListener(b,c,!1)};c.onUserAction=function(a,b){function e(){c.removeEvent(document,"mousemove",
e);d&&(clearTimeout(d),d=null);a()}var d=null;b&&(d=setTimeout(e,b));c.addEvent(document,"mousemove",e)};var C={evaluate:/\[!([\s\S]+?)!\]/g,interpolate:/\[!=([\s\S]+?)!\]/g,varname:"dt"};c.template=function(a,b){var e={};c.extend(e,C,b);var d="var __p=[],print=function(){__p.push.apply(__p,arguments);};__p.push('"+a.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(e.interpolate,function(a,b){return"',"+b.replace(/\\'/g,"'")+",'"}).replace(e.evaluate||null,function(a,b){return"');"+b.replace(/\\'/g,
"'").replace(/[\r\n\t]/g," ")+"__p.push('"}).replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t")+"');return __p.join('');";try{return new Function(e.varname,"extra",d)}catch(f){throw f;}};c.relativeDate=function(a,b){var e=new Date(a.getTime());c.each(b,function(b,c){switch(c){case "years":e.setYear(a.getFullYear()+b);break;case "months":e.setMonth(a.getMonth()+b);break;case "days":e.setDate(a.getDate()+b);break;case "hours":e.setHours(a.getHours()+b);break;case "minutes":e.setMinutes(a.getMinutes()+
b);break;case "seconds":e.setSeconds(a.getSeconds()+b);break;case "milliseconds":e.setMilliseconds(a.getMilliseconds()+b)}});return e};c.timeDiff=function(a,b){var e=null,d=null;b?(e=a,d=b):(e=new Date,d=a);var d=e-d,e=0<d,d=Math.abs(d),d=c.divmod(d,1E3,"seconds","milliseconds"),f=c.divmod(d.seconds,60,"minutes","seconds"),g=c.divmod(f.minutes,60,"hours","minutes"),k=c.divmod(g.hours,24,"days","hours"),m=c.divmod(k.days,365,"years","days"),h=[],j="",n="",j=!1;0<m.years&&(n=h[h.length]=m.years+(" year"+
(1<m.years?"s":"")),j=!0);0<m.days&&(h[h.length]=m.days+(" day"+(1<m.days?"s":"")),j||(n=k.hours+l,j=!0));if(0<k.hours){var l=" hour"+(1<k.hours?"s":"");h[h.length]=k.hours+l;j||(n=k.hours+l,j=!0)}0<g.minutes&&(l=" minute"+(1<g.minutes?"s":""),h[h.length]=g.minutes+l,j||(n=g.minutes+l,j=!0));0<f.seconds&&(l=" second"+(1<f.seconds?"s":""),h[h.length]=f.seconds+l,j||(n=f.seconds+l,j=!0));0<d.milliseconds&&(h[h.length]=d.milliseconds+(" millisecond"+(1<d.milliseconds?"s":"")),j||(n="less than 1 second"));
j=e?"ago":"in the future";h[h.length]=j;return{verbose:h.join(" "),concise:c.sprintf("%s %s",n,j),positive:e,years:m.years,days:m.days,hours:k.hours,minutes:g.minutes,seconds:f.seconds,milliseconds:d.milliseconds}};c.divmod=function(a,b,c,d){d=d||"remainder";var f={};f[c||"quotient"]=parseInt(a/b,10);f[d]=a%b;return f};var w=function(){};c.inherits=function(a,b){b=b||function(){};var e=function(){a.apply(this,arguments);b.apply(this,arguments)};c.extend(e,a);w.prototype=a.prototype;e.prototype=new w;
e.prototype.constructor=e;e.__super__=a.prototype;return e};c.SharedMethods=c.PubSubPattern=function(){};c.PubSubPattern.prototype.cancelSubscriptions=function(a){a&&c.path(this,"subscriptions."+a,!1)?this.subscriptions[a]=[]:a||(this.subscriptions={})};c.PubSubPattern.prototype.once=function(a,b){function c(){b.apply(d,arguments);d.off([a,c])}var d=this;return d.on(a,c)};c.PubSubPattern.prototype.on=function(a,b,c){a=a.split(" ");this.hasOwnProperty("subscriptions")||(this.subscriptions={});if(c){c=
[];for(var d=0,f=a.length;d<f;)c[c.length]=this.once(a[d],b),d++;return 1===c.length?c[0]:c}c=[];d=0;for(f=a.length;d<f;){var g=a[d];this.subscriptions.hasOwnProperty(g)||(this.subscriptions[g]=[]);this.subscriptions[g][this.subscriptions[g].length]=b;c[c.length]=[g,b];d++}return 1===c.length?c[0]:c};c.PubSubPattern.prototype.off=function(a){var b=a[0];a=a[1];if(this.subscriptions.hasOwnProperty(b))for(var c=this.subscriptions[b],d=c.length;d--;)c[d]===a&&this.subscriptions[b].splice(d,1)};c.PubSubPattern.prototype._doCallbacks=
function(a,b){for(var c=a.slice(),d=b.slice(),f=0,g=c.length;f<g;)c[f].apply(this,d.slice(1)),f++};c.PubSubPattern.prototype.fire=function(){var a=Array.prototype.slice.call(arguments);this.hasOwnProperty("subscriptions")||(this.subscriptions={});this.subscriptions.hasOwnProperty("debug")&&this._doCallbacks(this.subscriptions.debug,["debug"].concat(a));this.subscriptions.hasOwnProperty("all")&&this._doCallbacks(this.subscriptions.all,["all"].concat(a));this.subscriptions.hasOwnProperty(a[0])&&this._doCallbacks(this.subscriptions[a[0]],
a);this.global_name&&(a=[this.global_name+"_"+a[0],this].concat(a.slice(1)),c.globalevents.fire.apply(c.globalevents,a))};c.globalevents=new c.PubSubPattern;c.ModularNamespace=function(){};c.ModularNamespace.prototype.provide=function(a,b){c.definePath(this,a,b)};c.SerialManager=function(a,b){this.max=a;this.counter=0;this.callback=b;this.data={};0===this.max&&this.execute()};c.SerialManager.prototype.bump=function(a,b){"undefined"!==typeof a&&(this.data[a]=b);++this.counter>=this.max&&this.callback(this.data)};
c.SerialManager.prototype.execute=function(a){this.callback(a)};c.Queue=function(){this.subscriptions={start:[],step:[],end:[]};this.list=[];this.args=[];this.pos=0;this.end_time=this.time_delta=this.start_time=null};c.augment(c.Queue,c.PubSubPattern);c.Queue.prototype.add=function(){var a=Array.prototype.slice.call(arguments);this.list[this.list.length]=a[0];this.args[this.args.length]=a.slice(1)};c.Queue.prototype.step=function(){if(0===this.pos)this.start_time=new Date,this.fire("start");else if(this.pos>=
this.list.length){this.end_time=new Date;this.time_delta=this.end_time-this.start_time;this.fire("end");return}this.fire("step");this.pos++;this.list[this.pos-1].apply(this,this.args[this.pos-1])};c.Poll=function(a){this.active=!1;this.interval=this.timer=null;this.counter=0;this.interval_duration=a||0;this.subscriptions={start:[],loop:[],stop:[]}};c.augment(c.Poll,c.PubSubPattern);c.Poll.prototype.start=function(){this.active||(this.active=!0,this.fire("start"),this.loop())};c.Poll.prototype.stop=
function(){this.active=!1;this.fire("stop")};c.Poll.prototype.loop=function(a){var b=this;b.timer&&(clearTimeout(b.timer),b.timer=null);b.active&&(a?b.timer=setTimeout(function(){b.timer=null;b.counter++;b.fire("loop")},a):0<b.interval_duration&&null===b.interval?b.interval=setInterval(function(){b.active?(b.counter++,b.fire("loop")):(clearInterval(b.interval),b.interval=null)},b.interval_duration):(b.counter++,b.fire("loop")))};c.Animation=function(a){var b=this;c.extend(b.options={},{start:null,
stop:null,values:[[0,0]],frames:0,easing:"linear",interval:0,duration:0,frames_second:77},a);b.subscriptions={start:[],complete:[],end:[],frame:[]};b.options.frames&&b.options.interval?(b.total_frames=b.options.frames,b.poll=new c.Poll(b.options.interval)):(b.total_frames=Math.ceil(b.options.frames_second*b.options.duration/1E3),b.poll=new c.Poll(Math.ceil(1E3/b.options.frames_second)));b.values="number"===c.getType(b.options.start)&&"number"===c.getType(b.options.stop)?[[b.options.start,b.options.stop]]:
b.options.values;b.reset();b.poll.on("loop",function(){b.active&&b.current_frame<b.total_frames?(b.current_frame++,b.fire.apply(b,["frame"].concat(b.getFrameValues(b.values,b.current_frame))),b.current_frame===b.total_frames&&b.fire("complete")):b.stop()})};c.augment(c.Animation,c.PubSubPattern);c.Animation.prototype.easings={linear:function(a,b){return Math.pow(a/b,1)},easeIn:function(a,b){return Math.pow(a/b,3)},easeOut:function(a,b){return 1-Math.pow(1-a/b,3)}};c.Animation.prototype.getFrameValues=
function(a,b){for(var c=0,d=a.length,f=[];c<d;){var g=a[c];f[f.length]=g[0]+(g[1]-g[0])*this.easings[g[2]||this.options.easing](b,this.total_frames);c++}return f};c.Animation.prototype.start=function(){this.active||(this.active=!0,this.start_time=new Date,this.fire("start"),this.fire.apply(this,["frame"].concat(this.getFrameValues(this.values,0))),this.poll.start())};c.Animation.prototype.stop=function(){this.stop_time=new Date;this.run_time=this.stop_time-this.start_time;this.reset();this.fire("end")};
c.Animation.prototype.reset=function(){this.active=!1;this.poll.stop();this.current_frame=0};var s=window.localStorage?!0:!1,t=new Date;t.setFullYear(t.getFullYear()+1);c.storage={set:function(a,b){if(!a||!b||-1<a.indexOf(" "))return!1;a="_dus_"+a;try{b=JSON.stringify(b)}catch(e){return!1}s?window.localStorage[a]=b:c.cookies.set(a,b,{expires:t});return!0},get:function(a,b){if(a)if(a="_dus_"+a,s)try{return"undefined"!==typeof window.localStorage[a]?JSON.parse(window.localStorage[a]):def}catch(e){return b}else{var d=
c.cookies.get(a);if(!d)return b;try{return JSON.parse(d)}catch(f){return b}}},unset:function(a){a&&(a="_dus_"+a,s?delete window.localStorage[a]:c.cookie.expire(a))}};c.CacheManager=function(){this.caches={}};c.CacheManager.prototype.getCache=function(a,b){return this.caches[a]||(this.caches[a]=new c.Cache(a,b))};c.caches=new c.CacheManager;c.Cache=function(a,b){this.name=a||"cache";this.limit=b?Math.min(b,50):50;this.data=c.storage.get(this.name)||[]};c.Cache.prototype.bump=function(a){this.data.length===
this.limit&&this.data.shift();this.data[this.data.length]=a;c.storage.set(this.name,this.data)};c.Cache.prototype.clear=function(){c.storage.set(this.name,this.data=[])};c.Stash=function(){this.callbacks=[];this.args=[];this.purged=!1};c.Stash.prototype.push=function(a,b){b=b||[];this.purged?a.apply(this,b):(this.callbacks.push(a),this.args.push(b))};c.Stash.prototype.purge=function(){if(!this.purged){this.purged=!0;for(var a=0,b=this.callbacks.length;a<b;)this.callbacks[a].apply(this,this.args[a]),
a++}};c.eval_time=new Date-q;return c};"function"===typeof window.define&&define.amd?define(["doubleunderscore/external"],function(p){return q(p)}):q()});
